<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chess Lab</title>

    <!-- chessboard.js (UI board) -->
    <link
      rel="stylesheet"
      href="./vendor/chessboardjs/css/chessboard-1.0.0.min.css"
    />

    <!-- jQuery (CDN) - must load BEFORE chessboard.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- chessboard.js (local) -->
    <script src="./vendor/chessboardjs/js/chessboard-1.0.0.min.js"></script>

    <!-- chess.js (rules / legality / FEN) -->
    <script src="./vendor/chessjs/chess.js"></script>

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="page">
      <header class="topbar">
        <div class="title">Chess Lab</div>
        <div class="subtitle">Stockfish + ELO slider</div>
      </header>

      <main class="content">
        <section class="board-wrap">
          <div id="board" class="board"></div>
          <div class="status" id="status"></div>
        </section>

        <aside class="panel">
          <div class="card">
            <div class="card-title">Opponent Strength</div>

            <label class="label-row" for="elo">
              <span>ELO - change anytime during game</span>
              <span class="value" id="eloValue">1200</span>
            </label>

            <input
              id="elo"
              type="range"
              min="400"
              max="2500"
              step="50"
              value="1200"
            />

            <label class="label-row" for="blunder">
              <span>Blunder</span>
              <span class="value" id="blunderValue">0</span>
            </label>

            <input
              id="blunder"
              type="range"
              min="-100"
              max="100"
              step="5"
              value="0"
            />

            <div class="hint">
              Left = more blunders. Right = less blunders. Center = normal for
              ELO.
            </div>
            <div class="row">
              <label class="check">
                <input id="analysisMode" type="checkbox" />
                <span>Analysis Mode (instant + best line)</span>
              </label>
            </div>

            <div
              class="hint"
              id="analysisLine"
              style="display: none; margin-top: 8px"
            >
              —
            </div>

            <div class="row">
              <label class="check">
                <input id="clickToMove" type="checkbox" checked />
                <span>Click-to-move (pick up / put down)</span>
              </label>
            </div>

            <div class="row">
              <label class="check">
                <input id="showMoveDots" type="checkbox" checked />
                <span>Show legal move dots</span>
              </label>
            </div>
            <div class="row">
              <label class="check">
                <input id="showMoveSquares" type="checkbox" checked />
                <span>Show legal move squares</span>
              </label>
            </div>

            <div class="row">
              <label class="check">
                <input id="playWhite" type="checkbox" checked />
                <span>Play as White</span>
              </label>
            </div>

            <div class="row">
              <button id="newGame">New Game</button>
              <button id="undo">Undo</button>
              <button id="flip">Flip</button>
            </div>
          </div>
          <div class="card" id="themeCard">
            <button
              class="card-title collapsible"
              id="themeToggle"
              type="button"
            >
              Theme <span class="chev" id="themeChev">▸</span>
            </button>

            <div class="collapsible-body" id="themeBody">
              <div class="theme-body">
                <div class="theme-grid">
                  <!-- NEW: Piece set selector -->
                  <div class="row">
                    <label
                      class="check"
                      style="justify-content: space-between; width: 100%"
                    >
                      <span>Piece set</span>
                      <select id="pieceSet">
                        <option value="wikipedia">Wikipedia (default)</option>
                        <option value="alpha">Alpha</option>
                        <option value="uscf">USCF</option>
                        <option value="merida">Merida</option>
                        <option value="cburnett">Cburnett</option>
                      </select>
                    </label>
                  </div>

                  <!-- NEW: Light/Dark UI toggle -->
                  <div class="row">
                    <label class="check">
                      <input id="uiTheme" type="checkbox" checked />
                      <span>Dark UI</span>
                    </label>
                  </div>
                  <div class="theme-divider"></div>

                  <label class="theme-row">
                    <span>Light squares</span>
                    <input id="themeSqLight" type="color" value="#f0d9b5" />
                  </label>

                  <label class="theme-row">
                    <span>Dark squares</span>
                    <input id="themeSqDark" type="color" value="#b58863" />
                  </label>

                  <div class="theme-divider"></div>

                  <label class="theme-row">
                    <span>Selected square</span>
                    <input id="themeHlSelected" type="color" value="#ffd700" />
                  </label>

                  <label class="theme-row">
                    <span>Last move (from)</span>
                    <input id="themeHlLastFrom" type="color" value="#00ff78" />
                  </label>

                  <label class="theme-row">
                    <span>Last move (to)</span>
                    <input id="themeHlLastTo" type="color" value="#00ff78" />
                  </label>

                  <label class="theme-row">
                    <span>Check highlight</span>
                    <input id="themeHlCheck" type="color" value="#ff0000" />
                  </label>

                  <div class="row theme-actions">
                    <button id="themeReset" type="button">Reset</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card" id="movesCard">
            <button
              class="card-title collapsible"
              id="movesToggle"
              type="button"
            >
              Moves <span class="chev" id="movesChev">▸</span>
            </button>

            <div class="collapsible-body" id="movesBody">
              <div class="moves-body">
                <pre id="moves" class="moves"></pre>
              </div>
            </div>
          </div>

          <div class="card" id="debugCard">
            <button
              class="card-title collapsible"
              id="debugToggle"
              type="button"
            >
              Debug <span class="chev" id="debugChev">▸</span>
            </button>

            <div class="collapsible-body" id="debugBody">
              <pre id="debug" class="debug"></pre>
            </div>
          </div>
        </aside>
      </main>
    </div>

    <!-- Your app logic -->
    <script src="app.js"></script>
  </body>
</html>
